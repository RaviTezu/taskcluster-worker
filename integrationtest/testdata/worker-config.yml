# This Source Code Form is subject to the terms of the Mozilla Public
# License, v. 2.0. If a copy of the MPL was not distributed with this
# file, You can obtain one at http://mozilla.org/MPL/2.0/.
transforms:
  - env
  - secrets
config:
  capacity:         {$env: TASKCLUSTER_CAPACITY}
  credentials:
    clientId:       {$env: TASKCLUSTER_CLIENT_ID}
    accessToken:    {$env: TASKCLUSTER_ACCESS_TOKEN}
  provisionerId:    test-dummy-provisioner
  workerType:       {$env: TASKCLUSTER_WORKER_TYPE}
  workerGroup:      test-dummy-workers
  workerId:         {$env: TASKCLUSTER_WORKER_ID}
  engine:           native
  engines:
    native:
      createUser: false
      groups: ['staff', 'everyone', 'localaccounts', '_developer', '_lpoperator', 'com.apple.sharepoint.group.1']
  logLevel:         debug
  plugins:
    env: {}
  pollingInterval:  1
  queueBaseUrl:     https://queue.taskcluster.net/v1
  reclaimOffset:    120
  temporaryFolder:  /var/tmp/tc-worker-tmp
  serverIp:           127.0.0.1
  serverPort:         60000
  tlsCertificiate:
    $secret:  project/taskcluster/taskcluster-worker/stateless-dns
    key:      certificate
  tlsKey:
    $secret:  project/taskcluster/taskcluster-worker/stateless-dns
    key:      tlsKey
  statelessDNSSecret:
    $secret:  project/taskcluster/taskcluster-worker/stateless-dns
    key:      secret
  statelessDNSDomain:
    $secret:  project/taskcluster/taskcluster-worker/stateless-dns
    key:      domain
  maxLifeCycle:       600
  minimumDiskSpace:   10000000  # 10 GB
  minimumMemory:      1000000   # 1 GB
  maxTasksToRun:      {$env: TASKCLUSTER_MAX_TASKS}
